{"data":{"mdx":{"code":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"5. Deploying to IBM Cloud\",\n  \"internal\": false,\n  \"tabs\": [\"React\", \"Vue\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar AnchorLinks = makeShortcode(\"AnchorLinks\");\nvar Row = makeShortcode(\"Row\");\nvar Column = makeShortcode(\"Column\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h3\", null, \"This step takes what we\\u2019ve built so far and optimizes the app for a production environment. We\\u2019ll be deploying the production build to IBM Cloud.\"), mdx(AnchorLinks, {\n    mdxType: \"AnchorLinks\"\n  }, mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#fork-clone-and-branch\"\n  }), \"Fork, clone and branch\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#create-ibm-cloud-account\"\n  }), \"Create IBM Cloud account\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#optimize-sass\"\n  }), \"Optimize Sass\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#build-for-production\"\n  }), \"Build for production\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#create-manifest-file\"\n  }), \"Create manifest file\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#create-static-file\"\n  }), \"Create static file\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#deploy-app\"\n  }), \"Deploy app\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#submit-pull-request\"\n  }), \"Submit pull request\")))), mdx(\"h2\", null, \"Preview\"), mdx(\"p\", null, \"A \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vue-step-6--carbon-tutorial.netlify.com\"\n  }), \"preview\"), \" of what you\\u2019ll build (visually no different, but built for production):\"), mdx(Row, {\n    mdxType: \"Row\"\n  }, mdx(Column, {\n    offsetLg: \"4\",\n    mdxType: \"Column\"\n  }, mdx(\"iframe\", {\n    height: \"400\",\n    title: \"Carbon Tutorial Step 5\",\n    src: \"https://vue-step-6--carbon-tutorial.netlify.com\",\n    frameborder: \"no\",\n    allowtransparency: \"true\",\n    allowfullscreen: \"true\",\n    className: \"bx--iframe bx--iframe--border\"\n  }))), mdx(\"h2\", null, \"Fork, clone and branch\"), mdx(\"p\", null, \"This tutorial has an accompanying GitHub repository called \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/carbon-design-system/carbon-tutorial-vue\"\n  }), \"carbon-tutorial-vue\"), \" that we\\u2019ll use as a starting point for each step. If you haven\\u2019t forked and cloned that repository yet, and haven\\u2019t added the upstream remote, go ahead and do so by following the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/tutorial-vue/step-1/vue#fork-clone--branch\"\n  }), \"step 1 instructions\"), \".\"), mdx(\"h3\", null, \"Branch\"), mdx(\"p\", null, \"With your repository all set up, let\\u2019s check out the branch for this tutorial step\\u2019s starting point.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ git fetch upstream\\n$ git checkout -b vue-step-5 upstream/vue-step-5\\n\")), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Note: This builds on top of step 4, but be sure to check out the upstream step 5 branch because it includes the static assets required to get through this step.\")), mdx(\"h3\", null, \"Build and start app\"), mdx(\"p\", null, \"Install the app\\u2019s dependencies (in case you\\u2019re starting fresh in your current directory and not continuing from the previous step):\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ yarn\\n\")), mdx(\"p\", null, \"Then, start the app:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ yarn serve\\n\")), mdx(\"p\", null, \"You should see something similar to where the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/tutorial/step-4/vue\"\n  }), \"previous step\"), \" left off.\"), mdx(\"h2\", null, \"Create IBM Cloud account\"), mdx(\"p\", null, \"Before we get started, \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://cloud.ibm.com/registration\"\n  }), \"create an IBM Cloud account\"), \" if you don\\u2019t already have one, as we\\u2019ll be deploying there in a bit.\"), mdx(\"h2\", null, \"Optimize Sass\"), mdx(\"p\", null, \"So far we\\u2019ve been developing in a, well, development environment where static asset optimization hasn\\u2019t been a priority. If you reference \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/src/styles/_carbon.scss\"), \", you\\u2019ll see one \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"@import\"), \" that is pulling in Carbon\\u2019s full Sass build.\"), mdx(\"h5\", null, \"src/styles/\", \"_\", \"carbon.scss\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-scss\"\n  }), \"$feature-flags: (\\n  grid-columns-16: true,\\n);\\n\\n@import 'carbon-components/scss/globals/scss/styles.scss';\\n\")), mdx(\"p\", null, \"To give you an idea of what\\u2019s all included, open up \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"node_modules/carbon-components/scss/globals/scss/styles.scss\"), \". You\\u2019ll see imports for components like accordion, slider, tooltip, etc. Since we aren\\u2019t using those components, let\\u2019s exclude them from our built stylesheets. Keeping the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"$feature-flags\"), \" Sass map, replace the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"styles.scss\"), \" import with:\"), mdx(\"h5\", null, \"src/styles/\", \"_\", \"carbon.scss\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-scss\"\n  }), \"// Feature flags\\n$css--font-face: true;\\n$css--plex: true;\\n\\n// Global styles\\n@import 'carbon-components/scss/globals/scss/css--font-face';\\n@import 'carbon-components/scss/globals/grid/grid';\\n\\n// Carbon components\\n@import 'carbon-components/scss/components/breadcrumb/breadcrumb';\\n@import 'carbon-components/scss/components/button/button';\\n@import 'carbon-components/scss/components/data-table/data-table';\\n@import 'carbon-components/scss/components/link/link';\\n@import 'carbon-components/scss/components/pagination/pagination';\\n@import 'carbon-components/scss/components/tabs/tabs';\\n@import 'carbon-components/scss/components/ui-shell/ui-shell';\\n\")), mdx(\"p\", null, \"In comparing to the included \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"styles.scss\"), \", you may be asking what happened to importing \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"_vars.scss\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"_colors.scss\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"_theme.scss\"), \", etc.? Many of those global Sass partials get imported through the components. For example, open \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"node_modules/carbon-components/scss/components/button/_button.scss\"), \" to see its dependencies. No harm in importing them as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"styles.scss\"), \" does, but for simplicity here, we\\u2019ll let the components pull them in.\"), mdx(\"p\", null, \"You can read more about optimizing Carbon\\u2019s Sass in the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://medium.com/carbondesign/minimal-css-with-carbon-b0c089ccfa71\"\n  }), \"Carbon Design System publication\"), \" on Medium.\"), mdx(\"h2\", null, \"Build for production\"), mdx(\"p\", null, \"Before we deploy our app, we need to create an optimized production build with this command. You may need to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CTRL-C\"), \" to stop the development environment first.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ yarn build\\n\")), mdx(\"p\", null, \"Looking at \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \", you\\u2019ll find \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"yarn build\"), \" to run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vue-cli-service build\"), \". This builds the app for production to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dist\"), \" folder. It bundles Vue in production mode and optimizes the build for the best performance. It even goes so far to minify files and include hashes in filenames for caching.\"), mdx(\"p\", null, \"As a lot of this may seem like magic since the build configuration came from the Vue CLI, go ahead and check out their \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://cli.vuejs.org/guide/build-targets.html#app\"\n  }), \"production build guidelines\"), \" for a full description of what\\u2019s happening.\"), mdx(\"h2\", null, \"Create manifest file\"), mdx(\"p\", null, \"Now that we have a production build, let\\u2019s get it on the cloud. We\\u2019re going to use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/cloudfoundry/staticfile-buildpack.git\"\n  }), \"staticfile-buildpack\"), \" to deploy our webapp. Since this is a Cloud Foundry buildpack, we\\u2019ll be using the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cf\"), \" command line interface (CLI). If running \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cf --help\"), \" doesn\\u2019t work for you, chances are you need to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.cloudfoundry.org/cf-cli/install-go-cli.html\"\n  }), \"install the CLI\"), \".\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Note: If unfamiliar with buildpacks, the \", mdx(\"a\", _extends({\n    parentName: \"em\"\n  }, {\n    \"href\": \"https://docs.cloudfoundry.org/buildpacks/staticfile/index.html\"\n  }), \"staticfile buildpack docs\"), \" has good definitions and configuration documentation.\")), mdx(\"p\", null, \"With the Cloud Foundry CLI installed, next, we need to create a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"manifest.yml\"), \" file in the root of the project. To prevent multiple apps trying to use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"carbon-tutorial\"), \" name, replace \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"USERNAME\"), \" with your GitHub username below to make sure our apps are uniquely named.\"), mdx(\"h5\", null, \"manifest.yml\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"---\\napplications:\\n  - name: carbon-tutorial-USERNAME\\n    memory: 64M\\n    buildpack: https://github.com/cloudfoundry/staticfile-buildpack.git\\n\")), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Note: With this set-up we\\u2019re still using a GitHub personal access token saved in \"), mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".env.local\"), mdx(\"em\", {\n    parentName: \"p\"\n  }, \". If you haven\\u2019t created a GitHub access token yet, see \", mdx(\"a\", _extends({\n    parentName: \"em\"\n  }, {\n    \"href\": \"/tutorial/step-3/vue#create-access-token\"\n  }), \"step 3\"), \". You can put the environment variable in the manifest file, or manually add it in the IBM Cloud dashboard, but since we\\u2019re building off previous tutorial steps nothing more is needed.\")), mdx(\"h2\", null, \"Create static file\"), mdx(\"p\", null, \"Create a new static file in the root of the project named \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Staticfile\"), \". This tells the app to deploy from the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dist\"), \" folder and not the root of the project.\"), mdx(\"h5\", null, \"Staticfile\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"root: dist\\n\")), mdx(\"h3\", null, \"Cloud Foundry ignore\"), mdx(\"p\", null, \"After telling Cloud Foundry what to include, we can also specify what to ignore. Create a top-level \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".cfignore\"), \" file. Cloud Foundry doesn\\u2019t let you push read-only files (specifically, files with permissions <\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"400\"), \"), so to prevent issues with the deploy, add:\"), mdx(\"h5\", null, \".cfignore\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"node_modules/.cache\\n\")), mdx(\"p\", null, \"You can speed up deploys by decreasing the files uploaded through cloud foundry. To accomplish this, ignore any folder not required by the production application on IBM Cloud. For example, in the case of serving static files, you can ignore \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"node_modules/\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/\"), \" because the only folder being served is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"build/\"), \".\"), mdx(\"h2\", null, \"Deploy app\"), mdx(\"p\", null, \"Login to IBM Cloud with:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ cf login -a https://api.ng.bluemix.net -sso\\n\")), mdx(\"p\", null, \"Deploy app using the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cf push\"), \" command. Since \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"manifest.yml\"), \" is in our root directory, we don\\u2019t need to specify it in the push command. But, if you have multiple manifest files that target different environments, it\\u2019s good practice to specify the file.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ cf push -f manifest.yml\\n\")), mdx(\"p\", null, \"To make it easy on ourselves by not needing to remember that command, let\\u2019s add a script in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \". We can combine the build and deploy steps to make sure we only deploy immediately after running the build. In the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"scripts\\\"\"), \" object in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \", add:\"), mdx(\"h5\", null, \"package.json\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"\\\"deploy\\\": \\\"rm -rf ./build && yarn build && cf push -f manifest.yml\\\"\\n\")), mdx(\"p\", null, \"Next time you want to deploy, you can simply run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"yarn deploy\"), \".\"), mdx(\"h2\", null, \"Submit pull request\"), mdx(\"p\", null, \"That does it! We\\u2019re going to submit a pull request to verify completion of this tutorial step. In doing so, \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"please include the mybluemix.net URL for your deployed app in your pull request description\"), \".\"), mdx(\"h3\", null, \"Continuous integration (CI) check\"), mdx(\"p\", null, \"Run the CI check to make sure we\\u2019re all set to submit a pull request.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ yarn ci-check\\n\")), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Note: Having issues running the CI check? \", mdx(\"a\", _extends({\n    parentName: \"em\"\n  }, {\n    \"href\": \"/tutorial/step-1/vue#continuous-integration-(ci)-check\"\n  }), \"Step 1\"), \" has troubleshooting notes that may help.\")), mdx(\"h3\", null, \"Git commit and push\"), mdx(\"p\", null, \"Before we can create a pull request, stage and commit all of your changes:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ git add --all && git commit -m \\\"feat(tutorial): complete step 5\\\"\\n\")), mdx(\"p\", null, \"Then, push to your repository:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ git push origin vue-step-5\\n\")), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Note: Having issues pushing your changes? \", mdx(\"a\", _extends({\n    parentName: \"em\"\n  }, {\n    \"href\": \"/tutorial/step-1/vue#git-commit-and-push\"\n  }), \"Step 1\"), \" has troubleshooting notes that may help.\")), mdx(\"h3\", null, \"Pull request (PR)\"), mdx(\"p\", null, \"Finally, visit \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/carbon-design-system/carbon-tutorial\"\n  }), \"carbon-tutorial\"), \" to \\u201CCompare & pull request\\u201D. In doing so, make sure that you are comparing to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vue-step-5\"), \" into \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"base: vue-step-5\"), \".\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Note: Expect your tutorial step PRs to be reviewed by the Carbon team but not merged. We\\u2019ll close your PR so we can keep the repository\\u2019s remote branches pristine and ready for the next person!\")));\n}\nMDXContent.isMDXComponent = true;"},"fields":{"slug":"/tutorial/step-5/vue","currentPage":"vue"},"frontmatter":{"title":"5. Deploying to IBM Cloud","label":null,"tabs":["React","Vue"],"internal":false}}},"pageContext":{"slug":"/tutorial/step-5/vue","currentPage":"vue"}}