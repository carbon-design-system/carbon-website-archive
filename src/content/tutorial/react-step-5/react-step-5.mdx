---
title: 5. Deploying to IBM Cloud
internal: false
---

## ðŸš§ Under Construction ðŸš§

### This step takes what we've built so far and optimizes the app for a production environment. We'll be deploying the production build to IBM Cloud.

<AnchorLinks>

- [Fork, clone and branch](#fork-clone-and-branch)
- [Optimize Sass](#optimize-sass)
- [Build for production](#build-for-production)
- [Create manifest file](#create-manifest-file)
- [Create static file](#create-static-file)
- [Deploy](#deploy)
- [Submit pull request](#submit-pull-request)

</AnchorLinks>

## Preview

A [preview](https://react-step-5--carbon-tutorial.netlify.com) of what you'll build (visually no different, but built for production):

<Row>
  <Column offsetLg="4">
    <iframe
      height="400"
      title="Carbon Tutorial Step 5"
      src="https://react-step-5--carbon-tutorial.netlify.com"
      frameborder="no"
      allowtransparency="true"
      allowfullscreen="true"
      class="bx--iframe bx--iframe--border"
    />
  </Column>
</Row>

### IBM Cloud

[Create an IBM Cloud account](https://cloud.ibm.com/registration) if you don't already have one.

### Optimize sass

We can further optimize our sass build by only importing the sass for the components we are using in our application.

In `index.scss` we can replace our import of the entire carbon sass on line `6`

```
@import 'carbon-components/scss/globals/scss/styles.scss';
```

and only import the components that we are actually using in our application.

```
$css--font-face: true;
$css--plex: true;
@import '~carbon-components/scss/globals/scss/css--font-face';
@import '~carbon-components/scss/globals/grid/grid';

// Carbon components
@import '~carbon-components/scss/components/link/link';
@import '~carbon-components/scss/components/button/button';
@import '~carbon-components/scss/components/tabs/tabs';
@import '~carbon-components/scss/components/pagination/pagination';
@import '~carbon-components/scss/components/data-table/data-table';
@import '~carbon-components/scss/components/ui-shell/ui-shell';
```

You can read more about this here https://medium.com/carbondesign/minimal-css-with-carbon-b0c089ccfa71

### Build for production

Before we deploy our app, we need create an optimized production build

```bash
yarn build
```

### Create manifest file

Create a `manifest.yml` file in the root of the project. You'll need to add your `REACT_APP_GITHUB_PERSONAL_ACCESS_TOKEN` here.

```bash
---
applications:
 - name: carbon-tutorial
   memory: 64M
   buildpack: https://github.com/cloudfoundry/staticfile-buildpack.git
   env:
   REACT_APP_GITHUB_PERSONAL_ACCESS_TOKEN: xxxXXX
```

### Create static file

Create a new static file in the root of the project named `Staticfile`. This tells the app to deploy from the `build` folder and not the root of the project.

```bash
root: build
```

### Deploy

Login to IBM Cloud

```bash
cf login -a https://api.ng.bluemix.net -sso
```

Deploy app

```bash
cf push -f manifest.yml
```

You can add a script to your `package.json` file to combine your build and deploy steps

```bash
"deploy": "rm -rf ./build && yarn build && cf push -f manifest.yml"
```

Next time you want to deploy, you can simply run `yarn deploy`.
